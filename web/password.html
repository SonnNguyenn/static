<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<!--edge浏览器H5兼容设置-->
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<!--360浏览器H5兼容设置-->
		<meta name="renderer" content="webkit" />
		<title>电脑商城</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!--导入核心文件-->
		<script src="../bootstrap3/js/holder.js"></script>
		<link href="../bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
		<script src="../bootstrap3/jquery-1.9.1.min.js"></script>
		<script src="../bootstrap3/js/bootstrap.js"></script>

	</head>

	<body>
			<div class="col-md-10">
				<div class="panel panel-default">

					<div class="panel-body">
						<form id="form-change-password" class="form-horizontal" role="form">
							<div class="form-group">
								<label class="col-md-2 control-label">old password：</label>
								<div class="col-md-8">
									<input id="oldPassword" name="oldPassword" type="text" class="form-control" placeholder="">
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-2 control-label">new password：</label>
								<div class="col-md-8">
									<input id="newPassword" name="newPassword" type="text" class="form-control" placeholder="">
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-2 control-label">confirm password：</label>
								<div class="col-md-8">
									<input id="confirmPassword" name="confirmPassword" type="text" class="form-control" placeholder="">
								</div>
							</div>
							<div class="form-group">
								<div class="col-sm-offset-2 col-sm-10">
									<input id="btn-change-password" type="button" class="btn btn-primary" onclick="checkPassword()" value="modify" />
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>

			<script type="text/javascript">
				function checkPassword() {
					var newPassword = document.getElementById("newPassword").value;
					var confirmPassword = document.getElementById("confirmPassword").value;

					if (newPassword === confirmPassword) {
						$.ajax({
							url: "/users/change_password",
							type: "POST",
							data: $("#form-change-password").serialize(),
							dataType: "JSON",
							success: function(json) {
								if (json.state == 200) {
									alert("change password success");

									location.href = "index.html";

								} else {
									alert("change password fail");
								}
							},

							error: function(xhr) {
								alert("error" + xhr.message);
							}
						})
					} else {
						alert("password not match");
					}
				}


			</script>

	</body>

</html>